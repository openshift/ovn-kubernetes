---
global:
  measurements:
    - name: podLatency
    - name: pprof
      pprofInterval: 1m
      pprofDirectory: pprof-data
      pprofTargets:
      - name: ovnkube-controller
        namespace: "ovn-kubernetes"
        labelSelector: {app: ovnkube-node}
        url: http://localhost:9410/debug/pprof/profile?seconds=30
      - name: ovnkube-control-plane
        namespace: "ovn-kubernetes"
        labelSelector: {name: ovnkube-control-plane}
        url: http://localhost:9411/debug/pprof/profile?seconds=30
      - name: ovnkube-controller-heap
        namespace: "ovn-kubernetes"
        labelSelector: {app: ovnkube-node}
        url: http://localhost:9410/debug/pprof/heap?seconds=30
      - name: ovnkube-control-plane-heap
        namespace: "ovn-kubernetes"
        labelSelector: {name: ovnkube-control-plane}
        url: http://localhost:9411/debug/pprof/heap?seconds=30
jobs:
  - name: cudn-density-l2-nopods
    jobIterations: 200
    qps: 10
    burst: 10
    namespacedIterations: true 
    namespace: cudn-density-l2-nopods
    waitWhenFinished: true
    podWait: false 
    preLoadImages: false 
    preLoadPeriod: 2m
    # Disabling churn until https://github.com/ovn-kubernetes/ovn-kubernetes/issues/5883 is resolved
    #churnConfig:
    #  percent: 10
    #  cycles: 10
    #  mode: objects
    objects:
      - objectTemplate: workloads/templates/udn-density/cudn_l2.yml
        replicas: 1
      - objectTemplate: workloads/templates/udn-density/cudn_ns.yml
        replicas: 1

